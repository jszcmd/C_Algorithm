/*
 * ================================================================================
 * ğŸ“˜ é¢˜ç›®: å¯»æ‰¾é‡å¤æ•° (Find the Duplicate Number)
 * ğŸ”— é¢˜ç›®é“¾æ¥: https://leetcode.cn/problems/find-the-duplicate-number/
 * ================================================================================
 * éš¾åº¦: ä¸­ç­‰
 * æ ‡ç­¾: æ•°ç»„, åŒæŒ‡é’ˆ, äºŒåˆ†æŸ¥æ‰¾ (æœ¬è§£æ³•ä½¿ç”¨åŒæŒ‡é’ˆ)
 *
 * ã€é¢˜ç›®æè¿°ã€‘
 * ç»™å®šä¸€ä¸ªåŒ…å« n + 1 ä¸ªæ•´æ•°çš„æ•°ç»„ nums ,å…¶æ•°å­—éƒ½åœ¨ [1, n] èŒƒå›´å†…(åŒ…æ‹¬ 1 å’Œ n).
 * å¯çŸ¥è‡³å°‘å­˜åœ¨ä¸€ä¸ªé‡å¤çš„æ•´æ•°.å‡è®¾ nums åªæœ‰ ä¸€ä¸ªé‡å¤çš„æ•´æ•° ,è¿”å› è¿™ä¸ªé‡å¤çš„æ•° .
 * * --------------------------------------------------------------------------------
 * âš ï¸ æ ¸å¿ƒé™åˆ¶ (Advance Constraints):
 * â€¢ ä½ è®¾è®¡çš„è§£å†³æ–¹æ¡ˆå¿…é¡» ä¸ä¿®æ”¹ æ•°ç»„ nums .
 * â€¢ åªèƒ½ä½¿ç”¨å¸¸é‡çº§ O(1) çš„é¢å¤–ç©ºé—´.
 * â€¢ æ—¶é—´å¤æ‚åº¦å¿…é¡»æ˜¯çº¿æ€§ O(n) .
 * * --------------------------------------------------------------------------------
 * ğŸŒŸ ç¤ºä¾‹ 1:
 * è¾“å…¥: nums = [1,3,4,2,2]
 * è¾“å‡º: 2
 *
 * ğŸŒŸ ç¤ºä¾‹ 2:
 * è¾“å…¥: nums = [3,1,3,4,2]
 * è¾“å‡º: 3
 *
 * --------------------------------------------------------------------------------
 * ğŸ“ æç¤º (Constraints):
 * â€¢ 1 <= n <= 10^5
 * â€¢ nums.length == n + 1
 * â€¢ 1 <= nums[i] <= n
 * ================================================================================
 */

#include <stdio.h>

int findDuplicate(int *nums, int numsSize)
{
    int n = numsSize;
    if (nums == NULL || n < 2)
    {
        return -1; // ğŸ›¡ï¸ è¾¹ç•Œå¤„ç†:æ•°ç»„ä¸ºç©ºæˆ–é•¿åº¦ä¸è¶³
    }

    // ğŸ [é˜¶æ®µä¸€:å¯»æ‰¾å¿«æ…¢æŒ‡é’ˆåœ¨ç¯ä¸­çš„ç›¸é‡ç‚¹]
    int slow = nums[0];       // ğŸ¢ æ…¢æŒ‡é’ˆ:åˆå§‹èµ°ä¸€æ­¥ (i -> nums[i])
    int fast = nums[nums[0]]; // ğŸ° å¿«æŒ‡é’ˆ:åˆå§‹èµ°ä¸¤æ­¥ (i -> nums[nums[i]])

    // ğŸ”„ é¾Ÿå…”èµ›è·‘:åªè¦æ²¡ç›¸é‡ï¼Œå°±ç»§ç»­å¾ªç¯
    while (slow != fast)
    {
        slow = nums[slow];       // ğŸ¢ æ…¢æŒ‡é’ˆæ¯æ¬¡èµ°ä¸€æ­¥
        fast = nums[nums[fast]]; // ğŸ° å¿«æŒ‡é’ˆæ¯æ¬¡èµ°ä¸¤æ­¥
    }

    // ğŸ“ [é˜¶æ®µäºŒ:å¯»æ‰¾ç¯çš„å…¥å£,å³é‡å¤çš„æ•°å­—]
    // ğŸ¤ ç›¸é‡å,ä¿æŒæ…¢æŒ‡é’ˆä½ç½®,å°†å¿«æŒ‡é’ˆé€å›é€»è¾‘èµ·ç‚¹
    fast = 0; // ğŸš© å¿«æŒ‡é’ˆå›åˆ°ç´¢å¼• 0(èµ·ç‚¹)

    // ğŸš¶ ä¸¤äººä»¥ç›¸åŒçš„é€Ÿåº¦å‰è¿›,å†æ¬¡ç›¸é‡ç‚¹å³ä¸ºé‡å¤æ•°
    while (slow != fast)
    {
        fast = nums[fast]; // ğŸ° å¿«æŒ‡é’ˆæ”¹èµ°ä¸€æ­¥
        slow = nums[slow]; // ğŸ¢ æ…¢æŒ‡é’ˆä¿æŒä¸€æ­¥
    }

    return slow; // âœ¨ è¿”å›ç›¸é‡ç‚¹çš„æ•°å€¼,å³ä¸ºé‡å¤çš„æ•´æ•°
}
