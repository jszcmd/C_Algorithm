/*
* =================================================================================
 * ğŸ“˜ é¢˜ç›®: 162. å¯»æ‰¾å³°å€¼ (Find Peak Element)
 * ğŸ”— é¢˜ç›®é“¾æ¥: https://leetcode.cn/problems/find-peak-element/
 * =================================================================================
 * éš¾åº¦:ä¸­ç­‰
 * æ ‡ç­¾:æ•°ç»„, äºŒåˆ†æŸ¥æ‰¾
 *
 * ã€é¢˜ç›®æè¿°ã€‘
 * å³°å€¼å…ƒç´ æ˜¯æŒ‡å…¶å€¼ä¸¥æ ¼å¤§äºå·¦å³ç›¸é‚»å€¼çš„å…ƒç´ .
 * ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums,æ‰¾åˆ°å³°å€¼å…ƒç´ å¹¶è¿”å›å…¶ç´¢å¼•.
 * æ•°ç»„å¯èƒ½åŒ…å«å¤šä¸ªå³°å€¼,åœ¨è¿™ç§æƒ…å†µä¸‹,è¿”å› ä»»ä½•ä¸€ä¸ªå³°å€¼ æ‰€åœ¨ä½ç½®å³å¯.
 *
 * --------------------------------------------------------------------------------
 * ğŸ’¡ æ ¸å¿ƒç†è§£ (User's Notes):
 * 1. è¾¹ç•Œå‡è®¾: nums[-1] = nums[n] = -âˆ (æ— ç©·å°).
 * è¿™æ„å‘³ç€åªè¦å¾€é«˜å¤„èµ°,å“ªæ€•èµ°åˆ°è¾¹ç•Œ,è¾¹ç•Œæœ¬èº«ä¹Ÿæ˜¯å³°å€¼.
 * 2. æ•°æ®ç‰¹å¾: å·²çŸ¥ä»»ä½•ä¸¤ä¸ªç›¸é‚»çš„å€¼éƒ½ä¸ç›¸ç­‰ (nums[i] != nums[i+1]).
 * 3. å¤æ‚åº¦è¦æ±‚: å¿…é¡»å®ç°æ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•.
 * (æš—ç¤ºå¿…é¡»ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾,è€Œä¸æ˜¯éå†)
 *
 * --------------------------------------------------------------------------------
 * ğŸŒŸ ç¤ºä¾‹ 1:
 * è¾“å…¥ï¼šnums = [1,2,3,1]
 * è¾“å‡ºï¼š2 (3æ˜¯å³°å€¼)
 *
 * ğŸŒŸ ç¤ºä¾‹ 2:
 * è¾“å…¥ï¼šnums = [1,2,1,3,5,6,4]
 * è¾“å‡ºï¼š1 æˆ– 5 (2å’Œ6éƒ½æ˜¯å³°å€¼)
 * =================================================================================
 */

int findPeakElement(const int *nums, const int numsSize) {
    const int n = numsSize;
    if (n == 1) return 0; // åªæœ‰ä¸€ä¸ªå…ƒç´ , å®ƒå°±æ˜¯å³°å€¼

    // --- 1. æ£€æŸ¥å·¦å³è¾¹ç•Œ (åˆ©ç”¨ -âˆ å‡è®¾) ---
    // æ£€æŸ¥0ä½ç½®: å·¦è¾¹ç•Œæ˜¯-âˆ, åªè¦æ¯”å³è¾¹å¤§å°±æ˜¯å³°å€¼
    if (nums[0] > nums[1]) return 0;

    // æ£€æŸ¥n-1ä½ç½®: å³è¾¹ç•Œæ˜¯-âˆ, åªè¦æ¯”å·¦è¾¹å¤§å°±æ˜¯å³°å€¼
    if (nums[n - 1] > nums[n - 2]) return n - 1;

    // --- 2. äºŒåˆ†æŸ¥æ‰¾ä¸­é—´åŒºåŸŸ ---
    // æ­¤æ—¶å·²çŸ¥: 0ä½ç½®æ˜¯"ä¸Šå¡"(nums[0]<nums[1]), n-1ä½ç½®æ˜¯"ä¸‹å¡"(nums[n-1]<nums[n-2])
    // æ ¹æ®æ•°å­¦æ€§è´¨, åœ¨ [1, n-2] ä¹‹é—´å¿…ç„¶å­˜åœ¨è‡³å°‘ä¸€ä¸ªæ³¢å³°
    int l = 1, r = n - 2, m = 0, ans = -1;

    while (l <= r) {
        m = l + ((r - l) >> 1); // ä½è¿ç®—æ±‚ä¸­ç‚¹

        // [æ ¸å¿ƒé€»è¾‘] çˆ¬å¡ç­–ç•¥: å“ªè¾¹é«˜å¾€å“ªè¾¹èµ°
        if (nums[m - 1] > nums[m]) {
            r = m - 1; // å·¦è¾¹é«˜, å³°å€¼åœ¨å·¦ä¾§
        } else if (nums[m] < nums[m + 1]) {
            l = m + 1; // å³è¾¹é«˜, å³°å€¼åœ¨å³ä¾§
        } else {
            ans = m; // æ—¢ä¸å°äºå·¦è¾¹, ä¹Ÿä¸å°äºå³è¾¹ -> æ‰¾åˆ°å³°å€¼
            break;
        }
    }
    return ans;
}
