/**
 * @brief ğŸš€ ç®—æ³•ç«èµ›å­˜å›¾ç¥å™¨:é“¾å¼å‰å‘æ˜Ÿ(é™æ€é‚»æ¥è¡¨)
 * -------------------------------------------------------------------------
 * ğŸ“ ã€é¢˜ç›®æè¿°ã€‘
 * -------------------------------------------------------------------------
 * åœ¨ç®—æ³•ç«èµ›ä¸­,é“¾å¼å‰å‘æ˜Ÿæ˜¯å­˜å‚¨ç¨€ç–å›¾çš„æœ€ä¼˜è§£,ä¸ä»…èŠ‚çœç©ºé—´,ä¸”æ”¯æŒé‡è¾¹.
 * 1. ğŸ“ èŠ‚ç‚¹ä¸è¾¹è§„èŒƒ:å‡è®¾èŠ‚ç‚¹ç¼–å· 1~10,æœ€å¤š 10 æ¡è¾¹.
 * 2. ğŸ“Š æ•°æ®ç»“æ„:åˆ©ç”¨æ•°ç»„æ¨¡æ‹Ÿå•é“¾è¡¨,é€šè¿‡ head æ•°ç»„ç´¢å¼•å„é¡¶ç‚¹çš„è¾¹.
 * 3. âš™ï¸ åŠŸèƒ½è¦æ±‚:
 * - åˆå§‹åŒ–:é‡ç½®è®¡æ•°å™¨ `cnt` å¹¶æ¸…ç©ºå¤´æŒ‡é’ˆæ•°ç»„ `head`.
 * - å­˜å›¾é€»è¾‘:å®ç°æœ‰å‘å›¾ä¸æ— å‘å›¾çš„é™æ€é“¾æ¥.
 * - æ·±åº¦éå†:é€šè¿‡ `head` è¿½è¸ªé“¾è¡¨,å®Œæ•´è¾“å‡ºå›¾çš„é‚»æ¥å…³ç³».
 * -------------------------------------------------------------------------
 * ğŸ§ª ã€æµ‹è¯•ç”¨ä¾‹ä¸é¢„æœŸç»“æœã€‘
 * -------------------------------------------------------------------------
 * è¾¹é›†1: {{1,3,6}, {4,3,4}, {2,4,2}, {1,2,7}, {2,3,5}, {3,1,1}}
 * é¢„æœŸè¾“å‡º:æŒ‰"åè¿›å…ˆå‡º"é¡ºåºæ˜¾ç¤ºèŠ‚ç‚¹çš„æ‰€æœ‰é‚»å±….
 * --- Case 1: Directed Chain Forward Star ---
 * é“¾å¼å‰å‘æ˜Ÿéå†ç»“æœ :
 * 1èŠ‚ç‚¹ (é‚»å±…ã€è¾¹æƒ) : (2,7) (3,6)
 * 2èŠ‚ç‚¹ (é‚»å±…ã€è¾¹æƒ) : (3,5) (4,2)
 * 3èŠ‚ç‚¹ (é‚»å±…ã€è¾¹æƒ) : (1,1)
 * 4èŠ‚ç‚¹ (é‚»å±…ã€è¾¹æƒ) : (3,4)
 *
 * ============================================
 * Case 2: æ— å‘å¸¦æƒå›¾ (n=5)
 * è¾¹é›†2: {{3,5,4}, {4,1,1}, {3,4,2}, {5,2,4}, {2,3,7}, {1,5,5}, {4,2,6}}
 * é¢„æœŸè¾“å‡º:æ¯ä¸ªèŠ‚ç‚¹éƒ½åº”æ˜¾ç¤ºåŒå‘è¿æ¥çš„é‚»å±….
 * --- Case 2: Undirected Chain Forward Star ---
 * é“¾å¼å‰å‘æ˜Ÿéå†ç»“æœ :
 * 1èŠ‚ç‚¹ (é‚»å±…ã€è¾¹æƒ) : (5,5) (4,1)
 * 2èŠ‚ç‚¹ (é‚»å±…ã€è¾¹æƒ) : (4,6) (3,7) (5,4)
 * 3èŠ‚ç‚¹ (é‚»å±…ã€è¾¹æƒ) : (2,7) (4,2) (5,4)
 * 4èŠ‚ç‚¹ (é‚»å±…ã€è¾¹æƒ) : (2,6) (3,2) (1,1)
 * 5èŠ‚ç‚¹ (é‚»å±…ã€è¾¹æƒ) : (1,5) (2,4) (3,4)
 *
 * -------------------------------------------------------------------------
 */

#include <stdio.h>
#include <string.h> // ğŸ› ï¸ åŒ…å« memset ä»¥æ”¯æŒå¿«é€Ÿæ¸…ç©ºæ•°ç»„

// ğŸ“Œ å®šä¹‰æœ€å¤§èŒƒå›´
#define MAXN 11 // ğŸ“ æœ€å¤§èŠ‚ç‚¹æ•° + 1 (æ”¯æŒç¼–å· 1-10)
#define MAXM 21 // ğŸ›£ï¸ æœ€å¤§è¾¹æ•° * 2 + 1 (è€ƒè™‘åˆ°æ— å‘å›¾éœ€åŒå‘å­˜è¾¹)

/**
 * ğŸ“Š é“¾å¼å‰å‘æ˜Ÿæ ¸å¿ƒå­˜å‚¨æ•°ç»„
 */
int head[MAXN];   // ğŸ head[i]: å­˜å‚¨èŠ‚ç‚¹ i çš„ç¬¬ä¸€æ¡(æœ€æ–°)å‡ºè¾¹çš„"ç¼–å·"
int next[MAXM];   // ğŸ”— next[i]: å­˜å‚¨ç¬¬ i æ¡è¾¹çš„"ä¸Šä¸€æ¡"å‡ºè¾¹çš„ç¼–å· (ç”¨äºé“¾å¼é“¾æ¥)
int to[MAXM];     // ğŸ¯ to[i]: å­˜å‚¨ç¬¬ i æ¡è¾¹çš„ç»ˆç‚¹èŠ‚ç‚¹ç¼–å·
int weight[MAXM]; // âš–ï¸ weight[i]: å­˜å‚¨ç¬¬ i æ¡è¾¹çš„æƒé‡å€¼
int cnt;          // ğŸ”¢ è¾¹è®¡æ•°å™¨: è®°å½•å½“å‰æ­£åœ¨å¤„ç†ç¬¬å‡ æ¡è¾¹

/**
 * ğŸ§¹ å‡½æ•°ï¼šbuild
 * ç›®çš„:åˆå§‹åŒ–/é‡ç½®å­˜å›¾ç¯å¢ƒ
 */
void build()
{
    cnt = 1;                       // ğŸ”¢ ä» 1 å·è¾¹å¼€å§‹ç¼–å·
    memset(head, 0, sizeof(head)); // ğŸ§¼ å°†æ‰€æœ‰å¤´èŠ‚ç‚¹æŒ‡å‘ 0 (ä»£è¡¨æš‚æ—¶æ— è¾¹)
}

/**
 * ğŸ›°ï¸ å‡½æ•°:addChainEdge
 * ç›®çš„:åœ¨é™æ€é“¾è¡¨ä¸­æ’å…¥ä¸€æ¡è¾¹ (u -> v, æƒé‡ w)
 * é€»è¾‘:é‡‡ç”¨"å¤´æ’æ³•",æ–°è¾¹å§‹ç»ˆæˆä¸ºè¯¥èŠ‚ç‚¹åœ¨ head æ•°ç»„ä¸­çš„æ–°èµ·ç‚¹
 */
void addChainEdge(int u, int v, int w)
{
    // æŠŠè¿™ä¸€æ¡è¾¹ (u -> v, æƒé‡ w) æ ‡è®°æˆç¬¬ cnt æ¡è¾¹
    next[cnt] = head[u]; // ğŸ”— æ­¥éª¤1:æ–°è¾¹çš„ next æŒ‡å‘èµ·ç‚¹ u ä¹‹å‰å¯¹åº”çš„æ—§"å¤´"è¾¹
    to[cnt] = v;         // ğŸ¯ æ­¥éª¤2:è®°å½•è¿™æ¡è¾¹çš„ç»ˆç‚¹æ˜¯ v
    weight[cnt] = w;     // âš–ï¸ æ­¥éª¤3:è®°å½•è¿™æ¡è¾¹çš„æƒé‡æ˜¯ w
    head[u] = cnt;       // ğŸ æ­¥éª¤4:å°†èµ·ç‚¹ u çš„"å¤´"è¾¹æ›´æ–°ä¸ºå½“å‰è¿™æ¡æœ€æ–°è¾¹
    cnt++;               // ğŸ”¢ æ­¥éª¤5:cntç´¯åŠ ,ä¸ºä¸‹ä¸€æ¬¡åŠ è¾¹åšå‡†å¤‡
}

/**
 * â¡ï¸ å‡½æ•°:directGraph
 * ç›®çš„:å»ºç«‹æœ‰å‘å¸¦æƒå›¾
 * @param edges è¾¹æ•°æ®æ•°ç»„ [[èµ·ç‚¹, ç»ˆç‚¹, æƒé‡], ...]
 */
void directGraph(int edges[][3], int edgeSize)
{
    for (int i = 0; i < edgeSize; i++)
    {
        int u = edges[i][0];   // èµ·ç‚¹
        int v = edges[i][1];   // ç»ˆç‚¹
        int w = edges[i][2];   // æƒé‡
        addChainEdge(u, v, w); // âš¡ è°ƒç”¨é“¾å¼å‰å‘æ˜ŸåŠ è¾¹é€»è¾‘
    }
}

/**
 * â†”ï¸ å‡½æ•°:undirectGraph
 * ç›®çš„:å»ºç«‹æ— å‘å¸¦æƒå›¾
 */
void undirectGraph(int edges[][3], int edgeSize)
{
    for (int i = 0; i < edgeSize; i++)
    {
        int u = edges[i][0];
        int v = edges[i][1];
        int w = edges[i][2];
        // ğŸ”„ æ— å‘å›¾åŒå‘åŠ è¾¹,å ç”¨ä¸¤ä¸ªè¾¹ç¼–å·ç©ºé—´
        addChainEdge(u, v, w); // è®°å½•ä» u åˆ° v
        addChainEdge(v, u, w); // è®°å½•ä» v åˆ° u
    }
}

/**
 * ğŸ” å‡½æ•°:traversal
 * ç›®çš„:é€šè¿‡ head å’Œ next æ•°ç»„éå†å…¨å›¾
 * @param n éœ€è¦éå†çš„èŠ‚ç‚¹ä¸Šé™
 */
void traversal(int n)
{
    printf("é“¾å¼å‰å‘æ˜Ÿéå†ç»“æœ :\n");
    for (int i = 1; i <= n; i++) // éå†æ¯ä¸ªèŠ‚ç‚¹
    {
        printf("%dèŠ‚ç‚¹ (é‚»å±…ã€è¾¹æƒ) : ", i);
        // ğŸŒ€ æ ¸å¿ƒé€»è¾‘:ä» head[i] å‡ºå‘,æ²¿ç€ next è¿½æº¯,ç›´åˆ°ç¼–å·ä¸º 0
        for (int ei = head[i]; ei > 0; ei = next[ei])
        {
            printf("(%d,%d) ", to[ei], weight[ei]);
        }
        printf("\n");
    }
}

/**
 * ğŸš€ ä¸»å‡½æ•°:é©±åŠ¨ä¸ç”¨ä¾‹éªŒè¯
 */
int main()
{
    // ğŸ’¡ ä¾‹å­ 1:æœ‰å‘å¸¦æƒå›¾æµ‹è¯•
    int n1 = 4;
    int edges1[][3] = {{1, 3, 6}, {4, 3, 4}, {2, 4, 2}, {1, 2, 7}, {2, 3, 5}, {3, 1, 1}};
    int size1 = sizeof(edges1) / sizeof(edges1[0]);

    printf("--- Case 1: Directed Chain Forward Star ---\n");
    build();                    // ğŸ§¼ åˆå§‹åŒ–
    directGraph(edges1, size1); // ğŸ—ï¸ å»ºå›¾
    traversal(n1);              // ğŸ” æ‰“å°

    printf("\n============================================\n\n");

    // ğŸ’¡ ä¾‹å­ 2:æ— å‘å¸¦æƒå›¾æµ‹è¯•
    int n2 = 5;
    int edges2[][3] = {{3, 5, 4}, {4, 1, 1}, {3, 4, 2}, {5, 2, 4}, {2, 3, 7}, {1, 5, 5}, {4, 2, 6}};
    int size2 = sizeof(edges2) / sizeof(edges2[0]);

    printf("--- Case 2: Undirected Chain Forward Star ---\n");
    build();                      // ğŸ§¼ å†æ¬¡åˆå§‹åŒ–
    undirectGraph(edges2, size2); // ğŸ—ï¸ å»ºå›¾
    traversal(n2);                // ğŸ” æ‰“å°

    return 0; // ğŸš€ ç¨‹åºé¡ºåˆ©å®Œæˆ
}
