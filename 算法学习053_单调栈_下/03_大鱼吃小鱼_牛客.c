/**
* ğŸŸ ã€é¢˜ç›®åç§°ã€‘:å¤§é±¼åƒå°é±¼ (åŒæ—¶æ•é£Ÿç‰ˆ)
 * ---------------------------------------------------------------
 * ğŸ”— ã€æµ‹è¯•é“¾æ¥ã€‘:
 * https://www.nowcoder.com/practice/77199defc4b74b24b8ebf6244e1793de
 * ---------------------------------------------------------------
 * ğŸ“ ã€é¢˜ç›®æè¿°ã€‘:
 * ç»™å®šä¸€ä¸ªæ•°ç»„ arr,æ¯ä¸ªå€¼ä»£è¡¨é±¼çš„ä½“é‡.
 * æ¸¸æˆæŒ‰"è½®"è¿›è¡Œ,è§„åˆ™å¦‚ä¸‹:
 * 1. ğŸ´ æ•é£Ÿè§„åˆ™æ¯ä¸€è½®,æ¯æ¡é±¼éƒ½ä¼šåƒæ‰å³è¾¹ã€ç¦»è‡ªå·±æœ€è¿‘ã€‘ä¸”ã€æ¯”è‡ªå·±ä½“é‡å°ã€‘çš„é±¼.
 * 2. ğŸ¯ ç›®æ ‡é™å®š:æ¯æ¡é±¼å‘å³æ‰¾,ä¸€è½®åªåƒä¸€æ¡.
 * 3. âš¡ åŒæ—¶å‘ç”Ÿ:æ•é£Ÿæ˜¯å¹¶è¡Œçš„.å³åœ¨ A åƒæ‰ B çš„åŒæ—¶,A ä¹Ÿå¯èƒ½æ­£åœ¨è¢«å®ƒå·¦è¾¹çš„é±¼åƒæ‰.
 * 4. ğŸ¤ äº‰æŠ¢è§„åˆ™:å¦‚æœå¤šæ¡é±¼åœ¨å½“å‰è½®æ‰¾åˆ°çš„æ˜¯åŒä¸€æ¡å°é±¼,åˆ™è¯¥å°é±¼åœ¨è¿™ä¸€è½®åŒæ—¶è¢«è¿™äº›å¤§é±¼åƒæ‰.
 * 5. ğŸ ç»ˆæ­¢æ¡ä»¶:å½“æ²¡æœ‰ä»»ä½•é±¼èƒ½è¢«åƒæ—¶,é±¼çš„æ•°é‡å›ºå®š,è¿‡ç¨‹ç»“æŸ.
 * * ---------------------------------------------------------------
 * ğŸ“Š ã€æ¡ˆä¾‹æ¨¡æ‹Ÿã€‘:
 * è¾“å…¥æ•°ç»„:[8, 3, 1, 5, 6, 7, 2, 4]
 * * â³ ç¬¬ä¸€è½®:
 * - 8 åƒ 3 (3åœ¨8å³è¾¹ä¸”æ¯”8å°)
 * - 3 åƒ 1
 * - 5, 6, 7 åŒæ—¶åƒ 2
 * - 4 æ²¡æœ‰è¢«åƒ
 * => å‰©ä½™:[8, 5, 6, 7, 4]
 * * â³ ç¬¬äºŒè½®ï¼š
 * - 8 åƒ 5
 * - 5, 6, 7 åŒæ—¶åƒ 4
 * => å‰©ä½™:[8, 6, 7]
 * * â³ ç¬¬ä¸‰è½®ï¼š
 * - 8 åƒ 6
 * => å‰©ä½™:[8, 7]
 * * â³ ç¬¬å››è½®ï¼š
 * - 8 åƒ 7
 * => å‰©ä½™:[8]
 * * âœ… ç»“æœ:è¿”å› 4

 * ---------------------------------------------------------------
 */

#include <stdio.h>

#define MAX 100001

int arr[MAX]; // ğŸ“¥ é±¼çš„ä½“é‡æ•°ç»„
int n; // ğŸ“ åˆå§‹é±¼çš„æ€»æ•°
int stack[MAX][2]; // ğŸ“š å•è°ƒæ ˆ:[0]å­˜å‚¨ä½“é‡,[1]å­˜å‚¨è¯¥é±¼è¢«åƒæ‰æ‰€éœ€çš„è½®æ•°
int r; // ğŸ“ æ ˆæŒ‡é’ˆ(è¡¨ç¤ºæ ˆå†…å…ƒç´ æ•°é‡)

/**
 * ğŸš€ è®¡ç®—é±¼ç¾¤æ•°é‡å›ºå®šæ‰€éœ€çš„æ€»è½®æ•°
 * æ€è·¯:ä»å³å¾€å·¦éå†,åˆ©ç”¨å•è°ƒæ ˆç»´æŠ¤"æ•é£Ÿæ—¶é—´çº¿"
 */
int turns() {
    r = 0;
    int ans = 0;

    // ğŸ” ä»å³å‘å·¦éå†,è¿™æ ·å·¦è¾¹çš„å¤§é±¼å°±èƒ½"å‘ç°"å³è¾¹çš„å°é±¼
    for (int i = n - 1, curTurns; i >= 0; i--) {
        // ğŸŸ å½“å‰éå†åˆ°çš„é±¼ arr[i]
        curTurns = 0;

        // ğŸ´ å¦‚æœå½“å‰é±¼ arr[i] æ¯”æ ˆé¡¶çš„é±¼å¤§,è¯´æ˜å®ƒèƒ½åƒæ‰å³è¾¹çš„é±¼
        // è¿™æ˜¯ä¸€ä¸ª"ä¸¥æ ¼å°å‹å¤§"çš„å•è°ƒæ ˆé€»è¾‘
        while (r > 0 && stack[r - 1][0] < arr[i]) {
            int net = stack[--r][1]; // å¼¹å‡ºè¢«åƒæ‰çš„å°é±¼,å¹¶è·å–å®ƒçš„ç”Ÿå­˜è½®æ•°

            // â± æ ¸å¿ƒé€»è¾‘:è®¡ç®—å½“å‰é±¼åƒå®Œå³ä¾§æ‰€æœ‰ç›®æ ‡æ‰€éœ€çš„æ€»è½®æ•°
            // å¦‚æœå°é±¼ net è½®æ‰è¢«åƒå®Œ,å¤§é±¼å¾—ç­‰å®ƒè¢«åƒå®Œ(æˆ–åŒæ—¶åƒ)
            // å– (å½“å‰ç´¯è®¡+1) å’Œ (è¢«åƒå°é±¼çš„ç”Ÿå­˜æ—¶é—´) çš„è¾ƒå¤§å€¼
            curTurns = (curTurns + 1 > net) ? curTurns + 1 : net;
        }

        // ğŸ’¾ å°†å½“å‰é±¼åŠå…¶"æ•é£Ÿè€—æ—¶"å…¥æ ˆ
        stack[r][0] = arr[i];
        stack[r++][1] = curTurns;

        // ğŸ† æ›´æ–°å…¨å±€æœ€å¤§è½®æ•°
        ans = (ans > curTurns) ? ans : curTurns;
    }
    return ans;
}

int main() {
    // ğŸ“¥ è¾“å…¥é±¼çš„æ•°é‡
    if (scanf("%d", &n) != 1) return 0;
    // ğŸ“¥ è¾“å…¥æ¯æ¡é±¼çš„ä½“é‡
    for (int i = 0; i < n; i++) {
        scanf("%d", &arr[i]);
    }
    // âš™ï¸ å¤„ç†é€»è¾‘
    int ans = turns();
    // ğŸ“¤ è¾“å‡ºç»“æœ
    printf("%d\n", ans);
    return 0;
}
